<html>
<head>
	<meta charset="utf-8">
	<title>Bash Random</title>
	<link rel="stylesheet" href="https://maximalisimus.github.io/Articles/html/main.css" type="text/css">
	<link rel="stylesheet" href="https://maximalisimus.github.io/Articles/html/zoom.css" type="text/css">
	<script src="https://maximalisimus.github.io/Articles/html/jquery.2.2.0.min.js"></script>
	<script type="text/javascript" src="https://maximalisimus.github.io/Articles/html/litezoom.js"></script>
</head>
<body>
	<div class="site">
		<div class="header">
			<div id="logo">
				<p style="margin:10px; padding:0px;">Random на службе сисадмина</p>
			</div>
		</div> 
		<div class="content">
			<center>
				<div class="images">
					<img src="https://maximalisimus.github.io/Articles/image/Bash_Random/rnd-img-3.jpg" width="480px"/> 
				</div>
				</center>
			</br>
		</div>
		<div class="content">
			<p>В процессе работы со случайными числами нам понадобится 2 дополнительных пакета: <b>bc</b> и <b>xxd</b>.</p>
			<p>Для исключения непредвиденных ошибок терминала, все команды рекомендуется выполнять в <b>Bash</b>.</p>
			<i>А теперь начинаем ...</i></br>
			<p>Для генерации случайного числа используется <b>$RANDOM</b>. А мы можем сгенерировать числов диапазоне, например от 0 до 100.</p>
			<p><b>Конечно, можем</b></p>
			<p class="codes">
				$ echo $((0+$RANDOM%100))</br>
				<span style="color:blue;"># 0 - число <b>ОТ</b>, 100 - число <b>ДО</b></span></br>
			</p>
			<p>На скриншоте вы можете видеть как скорретировать диапазон генерации псевдослучайного числа.</p>
			<div class="imgex">
				<img src="https://maximalisimus.github.io/Articles/image/Bash_Random/scr-rnd-1.png" height="400px" />
			</div>
			<p>Хорошо. А мы можем сгенерировать случайное имя. Ответ - да, можем.</p>
			<p>Можно воспользоваться следующими командами:</p>
			<p class="codes">
				<span style="color:blue;"># Linux</span></br>
				$ cat /dev/urandom | tr -cd 'a-f0-9' | head -c 32</br>
				<span style="color:blue;"># OS X или другой BSD</span></br>
				$ cat /dev/urandom | env LC_CTYPE=C tr -cd 'a-f0-9' | head -c 32				
			</p>
			<p>Можно воспользоваться <b>unix mktemp</b>:</p>
			<p class="codes">
				$ TMPFILE=`mktemp tmp.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX` &amp;&amp;  echo $TMPFILE</br>
				tmp.PwowNsqK6yiHzSP4wB1meJvnzErQacI6
			</p>
			<p>Но куда интереснее поработать с именами через <b>RANDOM</b>. Т.к. в этом случае мы сможем понять как преобразуются символы в числа и обратно, 
			а также диапазон алфавита.
			Именно для этого и понадобятся 2 дополнительных утилиты - <b>basic calculator (bc)</b> и <b>xxd</b>.</p>
			<p><b>xxd</b> грубо говоря, преобрузет строку в шестнадцатеричный код или обратно из шестнадцатеричного кода в строку.</p>
			<p class="codes">
				<span style="color:blue;"># Из строки в шестнадцатеричный формат HEX</span></br>
				$ echo -e -n "string" | xxd -p | tr [:lower:] [:upper:]</br>
				<span style="color:blue;"># tr преобразует символы нижнего регистра в верхний для дальнейшего использования</span></br></br>
				<span style="color:blue;"># Из шестнадцатеричного формата в строку</span></br>
				echo -e -n "hex" | xxd -r -p
			</p>
			<p>У <b>bc</b> есть одна меленькая особенность. 
			Работая с шестнадцатеричной системой счисления ему обязательно нужен верхний регистр символов, иначе он выдаст ошибку синтаксиса.</p>
			<p class="codes">
				$ echo "ibase=16; obase=A; 4f" | bc</br>
				(standard_in) 1: syntax error</br></br>
				$ echo "ibase=16; obase=A; 4F" | bc</br>
				79</br></br>
				$ echo "obase=16; 97" | bc</br>
				61</br></br>
				$ echo "obase=16; 65" | bc</br>
				41
			</p>
			<div class="imgex">
				<img src="https://maximalisimus.github.io/Articles/image/Bash_Random/scr-rnd-2.png" height="400px" />
			</div>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<center><h3>Заголовок по центру!</h3></center> 
			<h3>Другой заголовок</h3>
			<p></p>
			<p class="codes">
				<span style="color:blue;"># Некое выделение</span></br>
				Код 1
			</p>
			<div class="codeses">
				<pre>
Функция()
	{
		с отступами
	}
				</pre>
			</div>
			
			<ul>
				<li>Список</li>
			</ul>
			<div class="imgex">
				<img src="" height="480px" />
			</div>
		</div>
		<div class="content">
			<p>Ну а на этом на сегодня всё. Моё дело - лишь заинтересовать вас.</p>
		</div>	
		<div class="about">
			<p>Copyright &copy; 07.07.2021 by <a href="mailto:maximalis171091@yandex.ru">Mikhail Artamonov</a></p>
		</div>
		</br>
	</div>
	<script type="text/javascript">$('.fz__minimized').litezoom({speed:400, viewTitle:true});</script>
</body>
</html>
